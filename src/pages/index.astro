---
import { getCollection } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import Footer from "@/components/Footer.astro";
import Socials from "@/components/Socials.astro";
import LinkButton from "@/components/LinkButton.astro";
import Card from "@/components/Card.astro";
import Hr from "@/components/Hr.astro";
import getSortedPosts from "@/utils/getSortedPosts";
import IconArrowRight from "@/assets/icons/IconArrowRight.svg";
import { SITE } from "@/config";
import { SOCIALS } from "@/constants";

const posts = await getCollection("blog");

const sortedPosts = getSortedPosts(posts);
const featuredPosts = sortedPosts.filter(({ data }) => data.featured);
const recentPosts = sortedPosts.filter(({ data }) => !data.featured);
---

<Layout>
  <Header />
  <main id="main-content" data-layout="index">
    <!-- Welcome Section -->
    <section id="hero" class="pt-8 pb-6">
      <div
        class="rounded-2xl border-2 border-accent/20 bg-gradient-to-br from-accent/5 via-background to-accent/10 p-8 shadow-lg backdrop-blur-sm"
      >
        <h1
          class="my-4 inline-block bg-gradient-to-r from-accent to-accent/60 bg-clip-text text-3xl font-bold text-transparent sm:my-8 sm:text-4xl"
        >
          Welcome To My Portfolio !
        </h1>

        <div class="space-y-4">
          <p class="text-lg leading-relaxed">
            Hi, I am <span class="font-bold text-accent"
              >Ei Sandi Aung (Sandi)</span
            >, a final-year Computer Science student with a passion for <span
              class="font-semibold text-accent/90">Backend Systems</span
            >, <span class="font-semibold text-accent/90">DevOps</span>, <span
              class="font-semibold text-accent/90">Cloud Infrastructure</span
            >, <span class="font-semibold text-accent/90">AI</span> and
            <span class="font-semibold text-accent/90">Web3/Blockchain</span>.
          </p>

          <p class="text-lg leading-relaxed">
            I am enthusiastic about learning new technologies and building
            products that matter. I learn most by trying to solve complex
            problems. I thrive in high-pressure environments.
          </p>

          <p class="text-lg leading-relaxed">
            Last summer at <span class="font-bold text-accent">Amazon</span> was the
            turning point of my career. I shipped an internal SQS queues partitioning
            feature, but the real win was learning how good systems are architected.
            Working alongside the brightest engineers taught me that design decisions
            matter more than just writing code. I carried that energy into the <span
              class="font-bold text-accent">MLH Fellowship</span
            > (which I entered after a hackathon win), where I built a privacy-preserving
            income verification app up to production quality.
          </p>

          <p class="text-lg leading-relaxed">
            This is just a glimpse of my journey. To dive deeper into my
            engineering philosophy, the lessons I've learned, and my motivation
            for the future, check out
            <a
              href="/journey"
              class="font-semibold text-accent decoration-2 underline-offset-4 hover:underline"
              >My Journey</a
            >
            page.
          </p>
        </div>

        {
          // only display if at least one social link is enabled
          SOCIALS.length > 0 && (
            <div class="mt-6 flex flex-col border-t border-accent/20 pt-6 sm:flex-row sm:items-center">
              <div class="me-2 mb-2 font-semibold text-accent sm:mb-0">
                Social Links:
              </div>
              <Socials />
            </div>
          )
        }
      </div>
    </section>

    <Hr />

    <!-- Past Experiences Section -->
    <section id="experiences" class="pt-12 pb-6">
      <h2 class="mb-6 text-2xl font-semibold tracking-wide">
        Professional Experience
      </h2>

      <div class="space-y-8">
        <!-- Amazon Experience -->
        <div class="border-l-4 border-accent py-2 pl-6">
          <h3 class="text-xl font-bold text-accent">SDE Intern</h3>
          <p
            class="mb-2 text-sm font-medium text-gray-500 uppercase dark:text-gray-400"
          >
            Amazon | S3 Event Notifications | April 2025 – July 2025
          </p>
          <ul class="list-inside list-disc space-y-2 text-foreground/90">
            <p>
              Developed an internal queues partitioning feature to minimise the
              blast radius during sudden traffic surge for the S3 Event
              Notifications Team across the full SDLC.
            </p>
          </ul>
          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Java</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Ruby</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >AWS</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >CI/CD</span
            >
          </div>
        </div>

        <!-- MLH Fellowship -->
        <div class="border-l-4 border-accent py-2 pl-6">
          <h3 class="text-xl font-bold text-accent">MLH Fellowship</h3>
          <p
            class="mb-2 text-sm font-medium text-gray-500 uppercase dark:text-gray-400"
          >
            Midnight | Blockchain, Web3 | Oct 2025 – Dec 2025
          </p>
          <ul class="list-inside list-disc space-y-2 text-foreground/90">
            <p>
              Developed a dapp on the Midnight blockchain that enables users to
              verify their income securely, without exposing sensitive personal
              information, by leveraging privacy-preserving features and
              Zero-Knowledge Proofs (ZKP).
            </p>
          </ul>
          <div class="mt-3 flex flex-wrap gap-2">
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Compact</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >React</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >TypeScript</span
            >
          </div>
        </div>
      </div>

      <div class="mt-6">
        <LinkButton href="/journey/">
          View Full Journey
          <IconArrowRight class="inline-block rtl:-rotate-180" />
        </LinkButton>
      </div>
    </section>

    <Hr />

    <!-- Featured Projects Section -->
    <section id="projects" class="pt-12 pb-6">
      <h2 class="mb-6 text-2xl font-semibold tracking-wide">
        Featured Projects
      </h2>

      <div class="space-y-6">
        <!-- Project 1: Multimodal AI Navigation Robot -->
        <div
          class="rounded-lg border border-border p-6 transition-colors hover:border-accent"
        >
          <div class="mb-2 flex items-start justify-between">
            <h3 class="text-xl font-bold">Multimodal AI Navigation Robot</h3>
            <span
              class="ml-4 text-xs font-medium whitespace-nowrap text-gray-500 uppercase dark:text-gray-400"
            >
              Sept 2025 - April 2026
            </span>
          </div>
          <p class="mb-3 text-sm text-accent">
            Dissertation Project | Coventry University
          </p>
          <p class="mb-4 text-foreground/80">
            Designing and developing a semi-autonomous robot that interprets
            natural-language voice commands, uses a local VLM for strategic
            planning and navigates dynamic environments with real-time obstacle
            avoidance.
          </p>
          <div class="flex flex-wrap gap-2">
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >AI/ML</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Computer Vision</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Robotics</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Python</span
            >
          </div>
        </div>

        <!-- Project 2: EclipseProof -->
        <div
          class="rounded-lg border border-border p-6 transition-colors hover:border-accent"
        >
          <div class="mb-2 flex items-start justify-between">
            <h3 class="text-xl font-bold">EclipseProof</h3>
            <span
              class="ml-4 text-xs font-medium whitespace-nowrap text-gray-500 uppercase dark:text-gray-400"
            >
              Oct 2025 - Dec 2025
            </span>
          </div>
          <p class="mb-3 text-sm text-accent">MLH Fellowship</p>
          <p class="mb-4 text-foreground/80">
            Developed a dapp on the Midnight blockchain that enables users to
            verify their income securely, without exposing sensitive personal
            information, by leveraging privacy-preserving features and
            Zero-Knowledge Proofs (ZKP).
          </p>
          <div class="mb-4 flex flex-wrap gap-2">
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Zero Knowledge Proofs</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Blockchain</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Compact</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >React</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >TypeScript</span
            >
          </div>
          <a
            href="https://github.com/Ei-Sandi/EclipseProof-Pro"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 text-sm font-medium text-accent hover:underline"
          >
            <svg class="size-4" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              ></path>
            </svg>
            View on GitHub
          </a>
        </div>

        <!-- Project 3: KomodoHub -->
        <div
          class="rounded-lg border border-border p-6 transition-colors hover:border-accent"
        >
          <div class="mb-2 flex items-start justify-between">
            <h3 class="text-xl font-bold">KomodoHub</h3>
            <span
              class="ml-4 text-xs font-medium whitespace-nowrap text-gray-500 uppercase dark:text-gray-400"
            >
              April 2025 | 72%
            </span>
          </div>
          <p class="mb-3 text-sm text-accent">Coventry University</p>
          <p class="mb-4 text-foreground/80">
            Led a team of 6 to develop a full-stack interactive platform
            educating children about Indonesia's endangered species, developing
            role-based user authentication system, and multiple dashboards
            across two Agile sprints.
          </p>
          <div class="mb-4 flex flex-wrap gap-2">
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Flask</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >HTML/CSS</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >JavaScript</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >SQL</span
            >
            <span
              class="rounded-full bg-accent/10 px-3 py-1 text-xs font-medium text-accent"
              >Figma</span
            >
          </div>
          <a
            href="https://github.com/Ei-Sandi/Komodo-Hub-5005CMD"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 text-sm font-medium text-accent hover:underline"
          >
            <svg class="size-4" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              ></path>
            </svg>
            View on GitHub
          </a>
        </div>
      </div>

      <div class="mt-6">
        <LinkButton href="/projects/">
          View All Projects
          <IconArrowRight class="inline-block rtl:-rotate-180" />
        </LinkButton>
      </div>
    </section>

    <Hr />

    <!-- Education Section -->
    <section id="education" class="pt-12 pb-6">
      <h2 class="mb-6 text-2xl font-semibold tracking-wide">Education</h2>

      <div class="space-y-6">
        <!-- Current Education -->
        <div class="border-l-4 border-accent py-2 pl-6">
          <h3 class="text-xl font-bold">Bachelor of Computer Science</h3>
          <p
            class="mb-2 text-sm font-medium text-gray-500 uppercase dark:text-gray-400"
          >
            Coventry University | Sept 2023 – Present | 1:1 Predicted
          </p>
          <p class="text-foreground/90">
            <strong>Key Modules:</strong> Advanced Algorithms, Parallel & Distributed
            Computing, Web API development, Security, Computer Systems, Data Science,
            Machine Learning
          </p>
        </div>

        <!-- Level 4 Diploma -->
        <div class="border-l-4 border-accent py-2 pl-6">
          <h3 class="text-xl font-bold">Level 4 Diploma in Computing</h3>
          <p
            class="mb-2 text-sm font-medium text-gray-500 uppercase dark:text-gray-400"
          >
            KMD Institute, Yangon | Sept 2017 – June 2018 | 2:1
          </p>
          <p class="text-foreground/90">
            <strong>Key Modules:</strong> Object Oriented Programming, Web Development,
            Database
          </p>
        </div>

        <!-- Medical School -->
        <div class="border-l-4 border-muted py-2 pl-6">
          <h3 class="text-xl font-bold">University of Medicine (1) Yangon</h3>
          <p
            class="mb-2 text-sm font-medium text-gray-500 uppercase dark:text-gray-400"
          >
            Dec 2017 – Feb 2020
          </p>
        </div>
      </div>
    </section>

    <Hr />

    <!-- Tools & Technologies Section -->
    <section id="tools" class="pt-12 pb-6">
      <h2 class="mb-6 text-2xl font-semibold tracking-wide">
        Tools & Technologies
      </h2>

      <div class="space-y-6">
        <!-- Programming Languages -->
        <div>
          <h3 class="mb-3 text-lg font-semibold text-accent">
            Programming Languages
          </h3>
          <div class="flex flex-wrap gap-3">
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Python</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Java</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >SQL</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >JavaScript</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >React</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >TypeScript</span
            >
          </div>
        </div>

        <!-- Tools & Platforms -->
        <div>
          <h3 class="mb-3 text-lg font-semibold text-accent">
            Tools & Platforms
          </h3>
          <div class="flex flex-wrap gap-3">
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >GitHub</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Figma</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >AWS</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >CI/CD Pipelines</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Infrastructure as Code</span
            >
          </div>
        </div>

        <!-- Concepts & Domains -->
        <div>
          <h3 class="mb-3 text-lg font-semibold text-accent">
            Concepts & Domains
          </h3>
          <div class="flex flex-wrap gap-3">
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Data Structures & Algorithms</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Distributed Systems</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Cloud Computing</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Machine Learning</span
            >
            <span
              class="rounded-lg border border-accent/20 bg-accent/10 px-4 py-2 text-sm font-medium text-accent"
              >Blockchain/Web3</span
            >
          </div>
        </div>
      </div>
    </section>

    <Hr />

    <!-- Featured Blogs Section -->
    {
      featuredPosts.length > 0 && (
        <>
          <section id="featured" class="pt-12 pb-6">
            <h2 class="mb-6 text-2xl font-semibold tracking-wide">
              Featured Blogs
            </h2>
            <ul>
              {featuredPosts.map(data => (
                <Card variant="h3" {...data} />
              ))}
            </ul>
          </section>
          {recentPosts.length > 0 && <Hr />}
        </>
      )
    }

    {
      recentPosts.length > 0 && (
        <section id="recent-posts" class="pt-12 pb-6">
          <h2 class="mb-6 text-2xl font-semibold tracking-wide">
            Recent Posts
          </h2>
          <ul>
            {recentPosts.map(
              (data, index) =>
                index < SITE.postPerIndex && <Card variant="h3" {...data} />
            )}
          </ul>
        </section>
      )
    }

    <div class="my-8 text-center">
      <LinkButton href="/posts/">
        All Posts
        <IconArrowRight class="inline-block rtl:-rotate-180" />
      </LinkButton>
    </div>
  </main>
  <Footer />
</Layout>

<script>
  document.addEventListener("astro:page-load", () => {
    const indexLayout = (document.querySelector("#main-content") as HTMLElement)
      ?.dataset?.layout;
    if (indexLayout) {
      sessionStorage.setItem("backUrl", "/");
    }
  });
</script>
